\chapter{Introduction}
Agda is a dependently typed functional programming language based on Martin--LÃ¶f type theory that can also be used as a proof assistant. Valiant's algorithm is a highly parallel algorithm for computing the transitive closure of a matrix in the time needed to multiply two matrices. Computing the transitive closure of an upper triangular matrix is a problem that appears when parsing a context free language.

In this thesis, we use Agda to formalise enough matrix algebra to formally prove the correctness of Valiant's algorithm.
The full formalisation and proof is made up of around 3500 lines of code, partitioned into around 30 modules, all of which is available at \url{https://github.com/thobaa/Algebra-of-Parallel-Programming-in-Agda}.

% questions to answer: what are we doing? Why are we doing it?
%\subsection{What?}
% 
%In this thesis, we use the programming language Agda to formalise enough matrix algebra to formally prove the correctness of Valiant's algorithm for computing the transitive closure of a matrix.

% begin by
% \subsection{Forward look}
% Why 
%\subsection{Why?}
% parsing -- 
% formal proofs
% Agda!

% functional program
Parsing is used as an early step in a many places where it is necessary to analyse some kind of text. Examples include compilers, where source code is turned into a tree structure that contains information about the properties a segment of code has (is it a statement, an if-expression, etc.) to help with type checking and machine code generation.
With the advent of CPUs with multiple cores, it becomes increasingly attractive to try and parse in parallel.
Because the functions in a functional programming language lack side effects, functional languages seem suitable for writing parallel programs.
Additionally, working in Agda allows us to write an algorithm with syntax similar to Haskell and prove its correctness simultaneously.

The choice of Valiant's algorithm is due to the fact that, although it was initially discovered to prove that parsing can be done in the time needed to perform a matrix multiplication, it also happens to be highly parallelizable. Additionally, it is a simple enough algorithm to make it feasible to write a formal proof of its correctness.

%because it is being actively developed at Chalmers, and because its 


We begin the report with Section \ref{Agda}, which a short introduction to Agda, where we use it to define and prove the correctness of a maximum function on lists. Next, in Section \ref{Algebra}, we introduce the algebra relevant for parsing (some parts of which are fairly non-standard, in particular, we need to consider structures with non-associative multiplication). We give definitions of algebraic structures both as ``mathematical'' definitions (as seen in an algebra textbook) and as Agda definitions, to display the similarity between Agda syntax and ordinary mathematics, and to provide the base for later chapters. The main algebraic structures we discuss are commutative monoids and nonassociative semirings. We also define matrices over the nonassociative semirings. In Section \ref{Parsing}, we then give a short introduction to Parsing, mainly to relate it to the algebra we have just presented, and show that Parsing is equivalent to computing the transitive closure of an upper triangular matrix. In the final part of our thesis, Section \ref{Valiant}, we first present Valiant's algorithm for computing the transitive closure and implement it in Agda. Then we combine the algebra with the ideas in the parsing section to prove the correctness of the algorithm.
%%%%%%%%%%

This report is meant to be usable as an introduction to proving things in Agda for people not familiar with the programming language, but it is helpful to have some previous experience with either functional programming or abstract algebra.
